{
  "parameters": {
    "jsCode": "// Get data from Get Budtender by Dispensary\nconst budtenderData = $input.item.json.response[0];\n\n// Extract the needed values\nconst budtenderId = budtenderData.id;\nconst currentPoints = parseInt(budtenderData.points) || 0;\n\n// Get earned points from the original input or use default\nconst content = $input.item.json.content || {};\nconst totalSpend = content.totalMotaSpend || 65;\nconst earnedPoints = totalSpend * 10; // 10 points per dollar for budtenders\n\n// Calculate new total\nconst newTotal = currentPoints + earnedPoints;\n\nconsole.log('Budtender data:', budtenderData);\nconsole.log('Budtender ID:', budtenderId);\nconsole.log('Current points:', currentPoints);\nconsole.log('Earned points:', earnedPoints);\nconsole.log('New total:', newTotal);\n\n// Return data formatted for the Update Budtender Points node\nreturn {\n  json: {\n    budtender_id: budtenderId,\n    new_points_total: newTotal,\n    // Keep the original data for reference\n    original: $input.item.json\n  }\n};"
  },
  "name": "Prepare Budtender Update",
  "type": "n8n-nodes-base.code",
  "typeVersion": 2,
  "position": [
    590, 
    1088
  ],
  "id": "3b5d7f14-9fc2-4a21-a52a-5c3e1b05ad7c"
}
